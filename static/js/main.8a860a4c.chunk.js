(this.webpackJsonpvideorecording=this.webpackJsonpvideorecording||[]).push([[0],{20:function(e,a,t){e.exports=t(39)},25:function(e,a,t){},39:function(e,a,t){"use strict";t.r(a);var n=t(1),c=t.n(n),o=t(18),r=t.n(o),i=(t(25),t(7)),s=t(11),l=t.n(s),u=t(19),d=t.n(u),b=t(8);var m=function(){var e=Object(n.useState)(0),a=Object(i.a)(e,2),t=a[0],o=a[1],r=Object(n.useState)(""),u=Object(i.a)(r,2),m=u[0],v=u[1],p=Object(n.useState)(1),f=Object(i.a)(p,2),w=f[0],g=f[1],j=Object(n.useState)(0),h=Object(i.a)(j,2),O=h[0],y=h[1],E=new s.UnityContent("./MyGame/360_vr3_build.json","./MyGame/UnityLoader.js");E.on("createVideo",(function(e){o(e)})),E.on("userName",(function(e){v(e)})),E.on("progress",(function(e){y(100*e)}));var k=b.storage(),N=b.database(),C=Object(n.useState)(!1),S=Object(i.a)(C,2),U=S[0],R=S[1],L=Object(n.useState)([]),I=Object(i.a)(L,2),G=I[0],M=I[1],A=Object(n.useRef)(null),B=Object(n.useRef)(null),D=Object(n.useCallback)((function(e){var a=e.data;a.size>0&&M((function(e){return e.concat(a)}))}),[M]),z=Object(n.useCallback)((function(){R(!0),B.current=new MediaRecorder(A.current.stream,{mimeType:"video/webm"}),B.current.addEventListener("dataavailable",D),B.current.start()}),[D]),Q=Object(n.useCallback)((function(){B.current.stop(),R(!1)}),[B]),x=Object(n.useCallback)((function(){var e=m;if(console.log(e),G.length){var a=new Blob(G,{type:"video/webm"});k.ref("/videos/".concat(e,"/pregunta-").concat(w,".webm")).put(a).then((function(a){a.ref.getDownloadURL().then((function(a){console.log(a),N.ref("users/".concat(e,"/answers/").concat(w)).update({url:a}),E.send("MenuQuestion","PlusNumber"),o(0),g(2)})),console.log("Uploaded a blob or file!")}));var t=URL.createObjectURL(a),n=document.createElement("a");document.body.appendChild(n),n.style="display: none",n.href=t,n.download="video-".concat(e,"-pregunta-").concat(w,".webm"),n.click(),window.URL.revokeObjectURL(t),M([])}}),[w,m,G,k]);return c.a.createElement("div",{className:"container-fluid"},c.a.createElement("div",{className:"row justify-content-center mt-4"},c.a.createElement("div",{className:"col-md-6",style:{height:"35em",display:1!==t?"block":"none"}},c.a.createElement(l.a,{unityContent:E}),O>=100?"":c.a.createElement("div",{className:"progress"},c.a.createElement("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat(O,"%")},"aria-valuenow":O,"aria-valuemin":"0","aria-valuemax":"100"},"".concat(O,"%"))))),c.a.createElement("div",{className:"row justify-content-center"},1===t?c.a.createElement("div",{className:"col-md-6"},c.a.createElement(d.a,{audio:!0,ref:A}),U?c.a.createElement("button",{className:"btn btn-danger",onClick:Q},"Parar Grabaci\xf3n"):c.a.createElement("button",{className:"btn btn-success",onClick:z},"Iniciar Grabaci\xf3n"),G.length>0&&c.a.createElement("button",{className:"btn btn-primary",onClick:function(){return x(m)}},"Descargar y Enviar")):""),1===t?"hola":"adios",m)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var v={apiKey:"AIzaSyA3Gkt6AcTUQnbipSfIOEsD3Q9-a-OCosY",authDomain:"vr-web-admin.firebaseapp.com",databaseURL:"https://vr-web-admin.firebaseio.com",projectId:"vr-web-admin",storageBucket:"vr-web-admin.appspot.com",messagingSenderId:"1043041595425",appId:"1:1043041595425:web:edeb929f4faccc32bc7360"};b.initializeApp(v),r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(m,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.8a860a4c.chunk.js.map